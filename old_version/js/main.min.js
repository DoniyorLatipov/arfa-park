document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelectorAll(".picture--hide");function t(){e.forEach(e=>{let t=e.getBoundingClientRect(),s=t.top,l=window.innerHeight,o=.35*window.innerHeight;if(e.classList.contains("flow4-img")&&(e.style.setProperty("--scroll-percent","100"),o*=1.7),s<=l&&s>=o){let r=(s-l)/(o-l)*100;e.style.setProperty("--scroll-percent",r)}else s<o?e.style.setProperty("--scroll-percent","100"):s>l&&e.style.setProperty("--scroll-percent","0")})}t(),window.addEventListener("scroll",()=>{t()});let s=0;function l(){s=window.pageYOffset||document.documentElement.scrollTop,document.body.classList.add("freeze"),document.body.style.top=`-${s}px`}function o(){document.body.classList.remove("freeze"),document.body.style.top="",window.scrollTo(0,s)}let r=document.querySelector(".watch-video-btn"),i=document.querySelector(".video-wrapper"),a=document.querySelector(".video-wrapper .close-btn"),c=document.getElementById("videoElement");r.addEventListener("click",()=>{i.classList.add("active"),l()}),a.addEventListener("click",()=>{i.classList.remove("active"),o(),c.pause()}),document.addEventListener("keydown",function(e){27==e.keyCode&&(i.classList.remove("active"),o(),c.pause())}),new Swiper(".modal-news-slider",{slidesPerView:1,spaceBetween:12,loop:!0,navigation:{nextEl:".modal-news-slider-button-next",prevEl:".modal-news-slider-button-prev"}});let n=document.querySelectorAll(".modal .close-btn"),d=document.querySelector(".modal-overlay"),u=document.querySelectorAll(".modal-button"),v={news:document.querySelector(".modal.modal--news"),request:document.querySelector(".modal.modal--request")};u.forEach(e=>e.addEventListener("click",e=>{let t=e.target.dataset.href;v[t].classList.add("active"),d.classList.add("active"),l()})),d.addEventListener("click",()=>{d.classList.remove("active"),o();let e=document.querySelector(".modal.active");e.classList.remove("active","success")}),n.forEach(e=>{e.addEventListener("click",()=>{d.classList.remove("active"),o();let e=document.querySelector(".modal.active");e.classList.remove("active","success")})}),document.addEventListener("keydown",function(e){if(27==e.keyCode){d.classList.remove("active"),o();let t=document.querySelector(".modal.active");t.classList.remove("active","success")}});let p=new Swiper(".tabs-slider",{slidesPerView:3,direction:"horizontal",allowTouchMove:!1,allowTouchMove:!1,breakpoints:{993:{slidesPerView:"auto",direction:"vertical"}}});new Swiper(".content-slider",{spaceBetween:10,direction:"vertical",allowTouchMove:!1,thumbs:{swiper:p},breakpoints:{769:{effect:"slide"}}});let m=document.querySelector(".resolution-btns .btn-3d"),L=document.querySelector(".resolution-btns .btn-2d"),y=document.querySelector(".layouts .content-banner .content-slider");function h(e,t){t.classList.add("active"),e.classList.remove("active"),y.classList.add(t.dataset.direction),y.classList.remove(e.dataset.direction)}m.addEventListener("click",()=>{h(L,m)}),L.addEventListener("click",()=>{h(m,L)});let w=document.querySelector(".photo-slider-wrapper .bottom-wrapper .active-marker"),b=new Swiper(".photo-slider-thumbs",{allowTouchMove:!1,spaceBetween:4,slidesPerView:"auto"}),E=new Swiper(".photo-slider",{allowTouchMove:!1,thumbs:{swiper:b},navigation:{nextEl:".photo-slider-button-next",prevEl:".photo-slider-button-prev"},breakpoints:{0:{allowTouchMove:!0},1200:{allowTouchMove:!1}},on:{slideChange:function(){let e=E.activeIndex;w.style.transform=`translateX(${40*e}px)`}}}),f=document.querySelector(".photo-slider-wrapper .photo-slider-button-prev"),k=document.querySelector(".photo-slider-wrapper .photo-slider-button-next"),q=document.querySelectorAll(".photo-slider-wrapper .bottom-wrapper .photo-slider-thumbs .swiper-slide"),$=document.querySelector(".photo-slider-wrapper .photo-slider");k.addEventListener("click",()=>{$.classList.add("left"),setTimeout(()=>{$.classList.remove("left")},600)}),q.forEach(e=>{e.addEventListener("click",()=>{$.classList.add("left"),setTimeout(()=>{$.classList.remove("left")},600)})}),f.addEventListener("click",()=>{$.classList.add("right"),setTimeout(()=>{$.classList.remove("right")},600)});let S=document.querySelector(".layouts .photo-banner .photo-btn"),g=document.querySelector(".photo-slider-wrapper"),_=document.querySelector(".photo-slider-wrapper .bottom-wrapper .close-btn");S.addEventListener("click",()=>{g.classList.add("active"),l()}),_.addEventListener("click",()=>{g.classList.remove("active"),o()}),document.addEventListener("keydown",function(e){27==e.keyCode&&(g.classList.remove("active"),o())});let x=document.querySelectorAll(".villas .villas-top .tabs-wrapper .tab"),B=document.querySelectorAll(".villas .villas-bottom .content"),A=document.querySelectorAll(".villas .villas-map .placemark-pic");x.forEach(e=>{e.addEventListener("click",function(){if(x.forEach(e=>e.classList.remove("active")),B.forEach(e=>e.classList.remove("active")),A.forEach(e=>e.classList.remove("active")),this.classList.contains("active"))return;let e=this.dataset.targetElement,t=Array.from(B).find(t=>t.id===`${e}-content`),s=Array.from(A).find(t=>t.id===`${e}-map`);t.classList.add("active"),s.classList.add("active"),this.classList.add("active")})}),new Swiper(".objects-slider",{loop:!0,slidesPerView:1,spaceBetween:0,pagination:{el:".objects-slider-pagination",clickable:!0},navigation:{nextEl:".objects-slider-button-next",prevEl:".objects-slider-button-prev"},breakpoints:{601:{slidesPerView:2,spaceBetween:2,loop:!1},769:{slidesPerView:"auto",spaceBetween:12,loop:!1}}});let F=new Lenis({duration:1.8,smooth:!0,smoothTouch:!0});function T(e){F.raf(e),requestAnimationFrame(T)}requestAnimationFrame(T);let z=document.querySelectorAll("a.scroll-link");z.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let s=document.querySelector(".to-top-button");s.classList.add("hide-special");let l=e.getAttribute("href"),o=document.querySelector(l);F.scrollTo(o),setTimeout(()=>{s.classList.remove("hide-special")},3e3)})});let C=document.querySelectorAll(".layouts .content-banner .content-slider .size"),P=document.querySelectorAll(".layouts .content-banner .content-slider .size-box"),V=document.querySelector(".layouts .content-banner .content-slider");function M({name:e,phone:t}){let s=document.querySelector(".modal.modal--request"),l=s.querySelector(".right-wrapper"),o=l.querySelector("#nameData"),r=l.querySelector("#phoneData");o.textContent=e||"Здравствуйте",r.textContent=t||"вашему номеру телефона",s.classList.add("success")}V.addEventListener("click",e=>{let t=e.target,s=e.target.classList.contains("size")||e.target.classList.contains("size-box")||e.target.parentElement.classList.contains("size")||e.target.parentElement.classList.contains("size-box");window.innerWidth<600&&s&&(C.forEach(e=>{e!==t&&e.classList.remove("active")}),P.forEach(e=>{e!==t&&e.classList.remove("active")}),t.classList.toggle("active"))});let R=document.getElementById("phone"),I=document.getElementById("clientForm");Inputmask({mask:"+9 (999) 999-99-99",showMaskOnHover:!1,showMaskOnFocus:!0}).mask(R),R.addEventListener("input",function(){let e=R.inputmask.unmaskedvalue();11===e.length?R.setCustomValidity(""):R.setCustomValidity("Пожалуйста, введите корректный номер телефона.")}),I.addEventListener("submit",function(e){e.preventDefault();let t=R.inputmask.unmaskedvalue();if(11!==t.length){R.reportValidity();return}let s=new FormData(I),l=Object.fromEntries(s.entries());M(l),setTimeout(()=>{I.reset()},500)});let D=document.querySelector(".to-top-button");function O(){window.scrollY>100?D.classList.remove("hide"):D.classList.add("hide")}D.addEventListener("click",()=>{D.classList.add("hide"),F.scrollTo(0)}),O(),window.addEventListener("scroll",()=>{O()});let j=document.querySelector(".cookie-banner"),H=j.querySelector("#cookieCloseButton");-1===document.cookie.indexOf("cookieAccepted=true")&&j.classList.add("active"),H.addEventListener("click",()=>{j.classList.remove("active"),document.cookie="cookieAccepted=true; max-age=31536000; path=/"});let Y=document.getElementById("fullVideoButton"),W=document.getElementById("videoElement");Y.addEventListener("click",()=>{W.requestFullscreen?W.requestFullscreen():W.webkitRequestFullscreen?W.webkitRequestFullscreen():W.msRequestFullscreen?W.msRequestFullscreen():W.mozRequestFullScreen?W.mozRequestFullScreen():W.webkitEnterFullscreen&&W.webkitEnterFullscreen()})});