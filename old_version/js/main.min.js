const flowesPictures=document.querySelectorAll(".picture--hide");function renderFlowPictures(){flowesPictures.forEach(e=>{let t=e.getBoundingClientRect(),o=t.top,s=window.innerHeight,l=.35*window.innerHeight;if(e.classList.contains("flow4-img")&&(e.style.setProperty("--scroll-percent","100"),l*=1.7),o<=s&&o>=l){let r=(o-s)/(l-s)*100;e.style.setProperty("--scroll-percent",r)}else o<l?e.style.setProperty("--scroll-percent","100"):o>s&&e.style.setProperty("--scroll-percent","0")})}renderFlowPictures(),window.addEventListener("scroll",()=>{renderFlowPictures()});let scrollPosition=0;function openModal(){scrollPosition=window.pageYOffset||document.documentElement.scrollTop,document.body.classList.add("freeze"),document.body.style.top=`-${scrollPosition}px`}function closeModal(){document.body.classList.remove("freeze"),document.body.style.top="",window.scrollTo(0,scrollPosition)}const watchVideoBtn=document.querySelector(".watch-video-btn"),videoWrapper=document.querySelector(".video-wrapper"),videoCloseBtn=document.querySelector(".video-wrapper .close-btn"),videoElement=document.getElementById("videoElement");watchVideoBtn.addEventListener("click",()=>{videoWrapper.classList.add("active"),openModal()}),videoCloseBtn.addEventListener("click",()=>{videoWrapper.classList.remove("active"),closeModal(),videoElement.pause()}),document.addEventListener("keydown",function(e){27==e.keyCode&&(videoWrapper.classList.remove("active"),closeModal(),videoElement.pause())}),new Swiper(".modal-news-slider",{slidesPerView:1,spaceBetween:12,loop:!0,navigation:{nextEl:".modal-news-slider-button-next",prevEl:".modal-news-slider-button-prev"}});const modalCloseButtons=document.querySelectorAll(".modal .close-btn"),modalOverlay=document.querySelector(".modal-overlay"),modalButtons=document.querySelectorAll(".modal-button"),modals={news:document.querySelector(".modal.modal--news"),request:document.querySelector(".modal.modal--request")};modalButtons.forEach(e=>e.addEventListener("click",e=>{let t=e.target.dataset.href;modals[t].classList.add("active"),modalOverlay.classList.add("active"),openModal()})),modalOverlay.addEventListener("click",()=>{modalOverlay.classList.remove("active"),closeModal();let e=document.querySelector(".modal.active");e.classList.remove("active","success")}),modalCloseButtons.forEach(e=>{e.addEventListener("click",()=>{modalOverlay.classList.remove("active"),closeModal();let e=document.querySelector(".modal.active");e.classList.remove("active","success")})}),document.addEventListener("keydown",function(e){if(27==e.keyCode){modalOverlay.classList.remove("active"),closeModal();let t=document.querySelector(".modal.active");t.classList.remove("active","success")}});const layoutTabsSwiper=new Swiper(".tabs-slider",{slidesPerView:3,direction:"horizontal",allowTouchMove:!1,allowTouchMove:!1,breakpoints:{993:{slidesPerView:"auto",direction:"vertical"}}});new Swiper(".content-slider",{spaceBetween:10,direction:"vertical",allowTouchMove:!1,thumbs:{swiper:layoutTabsSwiper},breakpoints:{769:{effect:"slide"}}});const resolutionBtn3d=document.querySelector(".resolution-btns .btn-3d"),resolutionBtn2d=document.querySelector(".resolution-btns .btn-2d"),layoutsOverlays=document.querySelector(".layouts .content-banner .content-slider");function switchResolution(e,t){t.classList.add("active"),e.classList.remove("active"),layoutsOverlays.classList.add(t.dataset.direction),layoutsOverlays.classList.remove(e.dataset.direction)}resolutionBtn3d.addEventListener("click",()=>{switchResolution(resolutionBtn2d,resolutionBtn3d)}),resolutionBtn2d.addEventListener("click",()=>{switchResolution(resolutionBtn3d,resolutionBtn2d)});const activeMarker=document.querySelector(".photo-slider-wrapper .bottom-wrapper .active-marker"),photoTabsSwiper=new Swiper(".photo-slider-thumbs",{allowTouchMove:!1,spaceBetween:4,slidesPerView:"auto"}),photoContentSwiper=new Swiper(".photo-slider",{allowTouchMove:!1,thumbs:{swiper:photoTabsSwiper},navigation:{nextEl:".photo-slider-button-next",prevEl:".photo-slider-button-prev"},breakpoints:{0:{allowTouchMove:!0},1200:{allowTouchMove:!1}},on:{slideChange:function(){let e=photoContentSwiper.activeIndex;activeMarker.style.transform=`translateX(${40*e}px)`}}}),leftBtn=document.querySelector(".photo-slider-wrapper .photo-slider-button-prev"),rightBtn=document.querySelector(".photo-slider-wrapper .photo-slider-button-next"),sliderPag=document.querySelectorAll(".photo-slider-wrapper .bottom-wrapper .photo-slider-thumbs .swiper-slide"),slider=document.querySelector(".photo-slider-wrapper .photo-slider");rightBtn.addEventListener("click",()=>{slider.classList.add("left"),setTimeout(()=>{slider.classList.remove("left")},600)}),sliderPag.forEach(e=>{e.addEventListener("click",()=>{slider.classList.add("left"),setTimeout(()=>{slider.classList.remove("left")},600)})}),leftBtn.addEventListener("click",()=>{slider.classList.add("right"),setTimeout(()=>{slider.classList.remove("right")},600)});const photoBtn=document.querySelector(".layouts .photo-banner .photo-btn"),photoSliderWrapper=document.querySelector(".photo-slider-wrapper"),closeBtn=document.querySelector(".photo-slider-wrapper .bottom-wrapper .close-btn");photoBtn.addEventListener("click",()=>{photoSliderWrapper.classList.add("active"),openModal()}),closeBtn.addEventListener("click",()=>{photoSliderWrapper.classList.remove("active"),closeModal()}),document.addEventListener("keydown",function(e){27==e.keyCode&&(photoSliderWrapper.classList.remove("active"),closeModal())});const tabs=document.querySelectorAll(".villas .villas-top .tabs-wrapper .tab"),contents=document.querySelectorAll(".villas .villas-bottom .content"),maps=document.querySelectorAll(".villas .villas-map .placemark-pic");tabs.forEach(e=>{e.addEventListener("click",function(){tabs.forEach(e=>e.classList.remove("active")),contents.forEach(e=>e.classList.remove("active"));let e=this.dataset.targetElement,t=Array.from(contents).find(t=>t.id===`${e}-content`),o=Array.from(maps).find(t=>t.id===`${e}-map`);t.classList.add("active"),o.classList.add("active"),this.classList.add("active")})}),new Swiper(".objects-slider",{loop:!0,slidesPerView:1,spaceBetween:0,pagination:{el:".objects-slider-pagination",clickable:!0},navigation:{nextEl:".objects-slider-button-next",prevEl:".objects-slider-button-prev"},breakpoints:{601:{slidesPerView:2,spaceBetween:2,loop:!1},769:{slidesPerView:"auto",spaceBetween:12,loop:!1}}});const lenis=new Lenis({duration:1.8,smooth:!0,smoothTouch:!0});function raf(e){lenis.raf(e),requestAnimationFrame(raf)}requestAnimationFrame(raf);const links=document.querySelectorAll("a.scroll-link");links.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let o=document.querySelector(".to-top-button");o.classList.add("hide-special");let s=e.getAttribute("href"),l=document.querySelector(s);lenis.scrollTo(l),setTimeout(()=>{o.classList.remove("hide-special")},3e3)})});const sizes=document.querySelectorAll(".layouts .content-banner .content-slider .size"),sizeBoxes=document.querySelectorAll(".layouts .content-banner .content-slider .size-box"),sizesConteiner=document.querySelector(".layouts .content-banner .content-slider");function openSuccessModal({name:e,phone:t}){let o=document.querySelector(".modal.modal--request"),s=o.querySelector(".right-wrapper"),l=s.querySelector("#nameData"),r=s.querySelector("#phoneData");l.textContent=e||"Здравствуйте",r.textContent=t||"вашему номеру телефона",o.classList.add("success")}sizesConteiner.addEventListener("click",e=>{let t=e.target;let o=e.target.classList.contains("size")||e.target.classList.contains("size-box")||e.target.parentElement.classList.contains("size")||e.target.parentElement.classList.contains("size-box");window.innerWidth<600&&o&&(sizes.forEach(e=>{e!==t&&e.classList.remove("active")}),sizeBoxes.forEach(e=>{e!==t&&e.classList.remove("active")}),t.classList.toggle("active"))});const phoneInput=document.getElementById("phone"),clientForm=document.getElementById("clientForm");Inputmask({mask:"+9 (999) 999-99-99",showMaskOnHover:!1,showMaskOnFocus:!0}).mask(phoneInput),phoneInput.addEventListener("input",function(){let e=phoneInput.inputmask.unmaskedvalue();11===e.length?phoneInput.setCustomValidity(""):phoneInput.setCustomValidity("Пожалуйста, введите корректный номер телефона.")}),clientForm.addEventListener("submit",function(e){e.preventDefault();let t=phoneInput.inputmask.unmaskedvalue();if(11!==t.length){phoneInput.reportValidity();return}let o=new FormData(clientForm),s=Object.fromEntries(o.entries());openSuccessModal(s),setTimeout(()=>{clientForm.reset()},500)});const toTopBtn=document.querySelector(".to-top-button");function renderToTopBtn(){window.scrollY>100?toTopBtn.classList.remove("hide"):toTopBtn.classList.add("hide")}toTopBtn.addEventListener("click",()=>{toTopBtn.classList.add("hide"),lenis.scrollTo(0)}),renderToTopBtn(),window.addEventListener("scroll",()=>{renderToTopBtn()});const cookieBanner=document.querySelector(".cookie-banner"),cookieCloseButton=cookieBanner.querySelector("#cookieCloseButton");-1===document.cookie.indexOf("cookieAccepted=true")&&cookieBanner.classList.add("active"),cookieCloseButton.addEventListener("click",()=>{cookieBanner.classList.remove("active"),document.cookie="cookieAccepted=true; max-age=31536000; path=/"});const fullVideoButton=document.getElementById("fullVideoButton"),video=document.getElementById("videoElement");fullVideoButton.addEventListener("click",()=>{video.requestFullscreen?video.requestFullscreen():video.webkitRequestFullscreen?video.webkitRequestFullscreen():video.msRequestFullscreen?video.msRequestFullscreen():video.mozRequestFullScreen?video.mozRequestFullScreen():video.webkitEnterFullscreen&&video.webkitEnterFullscreen()});